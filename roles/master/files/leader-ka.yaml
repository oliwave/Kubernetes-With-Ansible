kind: Pod
apiVersion: v1
metadata:
  annotations:
    scheduler.alpha.kubernetes.io/critical-pod: ""
  labels:
    component: keepalived
    tier: control-plane
  name: kube-keepalived
  namespace: kube-system
spec:
  hostNetwork: true
  priorityClassName: system-cluster-critical
  containers:
    - name: kube-keepalived
      image: docker.io/osixia/keepalived
      env:
        - name: KEEPALIVED_VIRTUAL_IPS
          value: 10.52.52.78
        - name: KEEPALIVED_INTERFACE
          value: ens160
        - name: KEEPALIVED_UNICAST_PEERS
          value: "#PYTHON2BASH:['10.52.52.73', '10.52.52.74', '10.52.52.75']"
        - name: KEEPALIVED_PASSWORD
          value: d0cker
        - name: KEEPALIVED_PRIORITY
          value: "100"
        - name: KEEPALIVED_ROUTER_ID
          value: "51"
      resources:
        requests:
          cpu: 100m
      securityContext:
        privileged: true
        capabilities:
          add:
            - NET_ADMIN
